# Кириш
RabbitMQ бу - хабарлар маклери. Маъноси шуки, у тайёрловчилардан хабарни олади ва уларни истеъмолчиларга етказади. Ўртада сиз берган қоидага асосан у хабарларни маршрутлаш, буфферлаш ва мажбурлашларни олиб боради.

RabbitMQ ва хабарлашиш умумий ҳолда қуйидаги терминларни ишлатади.

•	Producing – бу жўнатишдан бошқа ҳеч нарса эмас. Хабарларни жўнатувчи дастур бу producer(яратувчи). Биз уни кейинчалик қуйидаги кўринишда чизамиз "P":

![](1.1.png)

Queue(навбат) бу почта қутиси номи. У RabbitMQ ичида яшайди. Хабарлар RabbitMQ  ва сизнинг дастурларингиз орқали ўтсада улар фақат queue (навбат) ичида сақланади. Queue  ҳеч қандай чегараланишларга эга эмас. У хабарларни сақлашда сиз хоҳлаган катталикдаги чексиз буфферга ўхшайди. Кўп producer лар битта навбатдан чиқувчи хабарларни жўнатишлари ва мана шу битта навбатдан жуда кўп consumer(истеъмолчи) лар хабарларни қабул қилиб олишга уриниб кўришлари мумкин. Queue ни қуйидаги кўринишда чизамиз ва устида унинг номини ҳам келтирамиз:

![](1.2.png)

Consuming (истеъмол қилиш) бу маъно жиҳатдан қабул қилиш билан ўхшашликка эга. Consumer бу программа бўлиб, одатда ушбу программалар хабарни олиш учун кутишади. Бизнинг чизмамизда у "C" каби тасвирланган:


![](1.3.png)

Шунга эътибор берингки producer, consumer ва broker лар битта мошинада бўлмасликлари керак. Ҳақиқатда эса кўп дастурлар бундай қилишмайди.

#"Hello World"
##(Go RabbitMQ клиентини қўллаган ҳолда)

Қўлланманинг ушбу қисмида биз Go da қуйидаги ишларни бажарувчи иккита кичик дастур ёзамиз:

1. producer – битта хабарни жўнатувчи 
2. consumer – хабарларни қабул қилиб ва уларни чоп этувчи.

Биз бошланишига Go RabbitMQ API нинг айрим деталларига таяниб жуда содда иш қиламиз. Бу иш "Hello World" хабарини жўнатиш.

Қуйидаги диаграммада "P" – бизнинг producer ва "C"  - бизнинг consumer. Ўртадаги қути – бу навбат, яъни RabbitMQ  нинг consumer  учун хабарларни сақлайдиган хабарлар буффери.

![Go нинг RabbitMQ клиент кутубхонаси](1.4.png)

RabbitMQ очиқ бўлмиш умумий-мақсаддаги протокол хабарлашиш учун AMQP 0.9.1 да гаплашади. RabbitMQ  учун кўпгина бошқа тиллардаги бир қанча клиентлар мавжуд. Биз ушбу қўлланмада Go amqp клиентни қўллаймиз.

Биринчи навбатда go get дан фойдаланиб amqp ни ўрнатинг:

```
$ go get github.com/streadway/amqp
```
Хозир биз amqp ни ўрнатдик. Энди сиз код ёзишингиз мумкин.

##Жўнатиш

![](1.5.png)

¬Биз бизнинг хабар жўнатувчимизни send.go ва хабар қабул қилувчимизни receive.go деб номлаймиз. Жўнатувчи RabbitMQ га боғланиб, битта хабар жўнатиб ва кейин чиқиб кетади.

send.go да биз аввал кутубхонани import қилишимиз зарур:

```
package main

import (
  "fmt"
  "log"

  "github.com/streadway/amqp"
)
```
Биз яна ҳар сафар amqp ни чақирганимизда қайтариладиган қийматни текширадиган ёрдамчи функцияга муҳтожмиз:
```
func failOnError(err error, msg string) {
  if err != nil {
    log.Fatalf("%s: %s", msg, err)
    panic(fmt.Sprintf("%s: %s", msg, err))
  }
}
```
Сўнгра RabbitMQ серверга боғланамиз:




